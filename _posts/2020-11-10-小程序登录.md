
# 小程序登录

>- 小程序登录
>- UnionID 机制说明
>- 授权
>- 开放数据效验
>- 获取手机号
>- 生物认证

## 小程序登录

## UnionID 机制说明

- 同一用户，对同一个微信开放平台下的不同应用，UnionID是相同的。

### UnionID 获取途径

- 调用接口 wx.getUserInfo，从解密数据中获取 UnionID。
- 如果开发者帐号下存在同主体的公众号，并且该用户已经关注了该公众号。开发者可以直接通过 wx.login + code2Session 获取到该用户 UnionID，无须用户再次授权。

- 如果开发者帐号下存在同主体的公众号或移动应用，并且该用户已经授权登录过该公众号或移动应用。开发者也可以直接通过 wx.login + code2Session 获取到该用户 UnionID ，无须用户再次授权。

- 用户在小程序（暂不支持小游戏）中支付完成后，开发者可以直接通过getPaidUnionId接口获取该用户的 UnionID，无需用户授权。注意：本接口仅在用户支付完成后的5分钟内有效，请开发者妥善处理。

- 小程序端调用云函数时，如果开发者帐号下存在同主体的公众号，并且该用户已经关注了该公众号，可在云函数中通过 cloud.getWXContext 获取 UnionID。

- 小程序端调用云函数时，如果开发者帐号下存在同主体的公众号或移动应用，并且该用户已经授权登录过该公众号或移动应用，也可在云函数中通过 cloud.getWXContext 获取 UnionID

------
- 绑定小程序流程
	- 登录微信开放平台 — 管理中心 — 小程序 — 绑定小程序

## 授权

	部分接口需要经过用户授权同意才能调用。我们把这些接口按使用范围分成多个 scope ，
	用户选择对 scope 来进行授权，当授权给一个 scope 之后，其对应的所有接口都可以直接使用。
- 接口调用时：
	- 如果用户未接受或拒绝过此权限，会弹窗询问用户，用户点击同意后方可调用接口；
    - 如果用户已授权，可以直接调用接口；
    - 如果用户已拒绝授权，则不会出现弹窗，而是直接进入接口 fail 回调。请开发者兼容用户拒绝授权的场景。

### 